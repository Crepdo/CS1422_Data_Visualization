{"remainingRequest":"/home/lzb/Desktop/ARTS-hw2/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lzb/Desktop/ARTS-hw2/frontend/src/components/BaseCharComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lzb/Desktop/ARTS-hw2/frontend/src/components/BaseCharComponent.vue","mtime":1649346098073},{"path":"/home/lzb/Desktop/ARTS-hw2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1649343723699},{"path":"/home/lzb/Desktop/ARTS-hw2/frontend/node_modules/babel-loader/lib/index.js","mtime":1649343724219},{"path":"/home/lzb/Desktop/ARTS-hw2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1649343723699},{"path":"/home/lzb/Desktop/ARTS-hw2/frontend/node_modules/vue-loader/lib/index.js","mtime":1649343724399}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgKiBhcyBkMyBmcm9tICJkMyI7DQppbXBvcnQgQ09OU1RBTlRTIGZyb20gIkAvY29uc3RhbnRzIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkJhc2VDaGFydENvbXBvbmVudCIsDQogIHByb3BzOiB7DQogICAgdGl0bGU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgIH0sDQogICAgYXBpVXJsOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICB9LA0KICAgIGhpZ2hsaWdodDogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgfSwNCiAgfSwNCiAgd2F0Y2g6IHsgLy9zd2l0Y2gNCiAgICBoaWdobGlnaHQobmV3VmFsLCBvbGRWYWwpIHsNCiAgICAgIGlmIChuZXdWYWwgIT09IG9sZFZhbCkgew0KICAgICAgICB0aGlzLiRwcm9wcy5oaWdobGlnaHQgPSBuZXdWYWw7DQogICAgICAgIGNvbnNvbGUubG9nKCJuZXdWYWw6IiwgdGhpcy4kcHJvcHMuaGlnaGxpZ2h0KTsNCiAgICAgICAgdGhpcy5jaGFuZ2UobmV3VmFsKTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZmV0Y2hDU1ZEYXRhKCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBjaGFuZ2UoaGkpIHsNCiAgICAgIHZhciBjb2xvciA9IGQzDQogICAgICAgIC5zY2FsZVNlcXVlbnRpYWwoKQ0KICAgICAgICAuaW50ZXJwb2xhdG9yKGQzLmludGVycG9sYXRlQ3ViZWhlbGl4RGVmYXVsdCkNCiAgICAgICAgLmRvbWFpbihbMCwgOV0pOw0KICAgICAgICANCiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCAxMDsgaW5kZXgrKykgew0KICAgICAgICBpZiAoaW5kZXggPT0gaGkpIGQzLnNlbGVjdEFsbCgiLmlkIiArIGluZGV4KS5zdHlsZSgiZmlsbCIsIGNvbG9yKGluZGV4KSk7DQogICAgICAgIGVsc2UgZDMuc2VsZWN0QWxsKCIuaWQiICsgaW5kZXgpLnN0eWxlKCJmaWxsIiwgImxpZ2h0Z3JleSIpOw0KICAgICAgfQ0KICAgICAgaWYgKGhpID09IC0xKQ0KICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgMTA7IGluZGV4KyspIHsNCiAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5pZCIgKyBpbmRleCkuc3R5bGUoImZpbGwiLCBjb2xvcihpbmRleCkpOw0KICAgICAgICB9DQogICAgfSwNCiAgICBmZXRjaENTVkRhdGEoKSB7DQogICAgICBmZXRjaCh0aGlzLiRwcm9wcy5hcGlVcmwpDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsNCiAgICAgICAgICAgIHRocm93IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpOw0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICB9KQ0KICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7DQogICAgICAgICAgcmV0dXJuIGQzLmNzdlBhcnNlKHJlc3VsdCk7DQogICAgICAgIH0pDQogICAgICAgIC50aGVuKChyZXN1bHQpID0+IHsNCiAgICAgICAgICB0aGlzLmRyYXdDaGFydChyZXN1bHQpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIGRyYXdDaGFydChjc3ZEYXRhKSB7DQogICAgICB2YXIgc2l6ZSA9IENPTlNUQU5UUy5TSVpFOw0KICAgICAgdmFyIG1hcmdpbiA9IHNpemUuTUFSR0lOOw0KICAgICAgdmFyIHdpZHRoID0gc2l6ZS5XSURUSDsNCiAgICAgIHZhciBoZWlnaHQgPSBzaXplLkhFSUdIVDsNCiAgICAgIHZhciBzdmcgPSBkMw0KICAgICAgICAuc2VsZWN0KHRoaXMuJHJlZnMucmVmQ2hhcnREaXYpDQogICAgICAgIC5hcHBlbmQoInN2ZyIpDQogICAgICAgIC5hdHRyKCJ3aWR0aCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpDQogICAgICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSkNCiAgICAgICAgLmFwcGVuZCgiZyIpDQogICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyBtYXJnaW4ubGVmdCArICIsIiArIG1hcmdpbi50b3AgKyAiKSIpOw0KICAgICAgdmFyIHhfbGlzdCA9IGNzdkRhdGEubWFwKCh4KSA9PiB4WyJ4Il0pOw0KICAgICAgdmFyIHhfbWluID0gTWF0aC5taW4oLi4ueF9saXN0KTsNCiAgICAgIHZhciB4X21heCA9IE1hdGgubWF4KC4uLnhfbGlzdCk7DQogICAgICB2YXIgeV9saXN0ID0gY3N2RGF0YS5tYXAoKHgpID0+IHhbInkiXSk7DQogICAgICB2YXIgeV9taW4gPSBNYXRoLm1pbiguLi55X2xpc3QpOw0KICAgICAgdmFyIHlfbWF4ID0gTWF0aC5tYXgoLi4ueV9saXN0KTsNCiAgICAgIHZhciB4ID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oW3hfbWluLCB4X21heF0pLnJhbmdlKFswLCB3aWR0aF0pOw0KICAgICAgc3ZnDQogICAgICAgIC5hcHBlbmQoImciKQ0KICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgwLCIgKyBoZWlnaHQgKyAiKSIpDQogICAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20oeCkpOw0KICAgICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbeV9taW4sIHlfbWF4XSkucmFuZ2UoWzAsIGhlaWdodF0pOw0KICAgICAgc3ZnLmFwcGVuZCgiZyIpLmNhbGwoZDMuYXhpc0xlZnQoeSkpOw0KICAgICAgdmFyIGNvbG9yID0gZDMNCiAgICAgICAgLnNjYWxlU2VxdWVudGlhbCgpDQogICAgICAgIC5pbnRlcnBvbGF0b3IoZDMuaW50ZXJwb2xhdGVDdWJlaGVsaXhEZWZhdWx0KQ0KICAgICAgICAuZG9tYWluKFswLCA5XSk7DQogICAgICB2YXIgaGkgPSB0aGlzLiRwcm9wcy5oaWdobGlnaHQ7DQogICAgICBzdmcNCiAgICAgICAgLmFwcGVuZCgiZyIpDQogICAgICAgIC5zZWxlY3RBbGwoImRvdCIpDQogICAgICAgIC5kYXRhKGNzdkRhdGEpDQogICAgICAgIC5lbnRlcigpDQogICAgICAgIC5hcHBlbmQoImNpcmNsZSIpDQogICAgICAgIC5hdHRyKCJjeCIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgcmV0dXJuIHgoZC54KTsNCiAgICAgICAgfSkNCiAgICAgICAgLmF0dHIoImN5IiwgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICByZXR1cm4geShkLnkpOw0KICAgICAgICB9KQ0KICAgICAgICAuYXR0cigiciIsIDUpDQogICAgICAgIC5hdHRyKCJjbGFzcyIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgcmV0dXJuICJpZCIgKyBkLmxhYmVsOw0KICAgICAgICB9KQ0KICAgICAgICAuc3R5bGUoImZpbGwiLCBmdW5jdGlvbiAoZCkgew0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuJHByb3BzLmhpZ2hsaWdodCk7DQogICAgICAgICAgaWYgKC0xID09IGhpIHx8IGQubGFiZWwgPT0gaGkpIHsNCiAgICAgICAgICAgIHJldHVybiBjb2xvcihkLmxhYmVsKTsNCiAgICAgICAgICB9DQogICAgICAgICAgcmV0dXJuICJsaWdodGdyZXkiOw0KICAgICAgICB9KTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["BaseCharComponent.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BaseCharComponent.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <b-col sm=\"12\" md=\"4\" class=\"p-1\">\r\n    <div ref=\"refChartDiv\"></div>\r\n    <h3>{{ title }}</h3>\r\n  </b-col>\r\n</template>\r\n\r\n<script>\r\nimport * as d3 from \"d3\";\r\nimport CONSTANTS from \"@/constants\";\r\nexport default {\r\n  name: \"BaseChartComponent\",\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    apiUrl: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    highlight: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n  },\r\n  watch: { //switch\r\n    highlight(newVal, oldVal) {\r\n      if (newVal !== oldVal) {\r\n        this.$props.highlight = newVal;\r\n        console.log(\"newVal:\", this.$props.highlight);\r\n        this.change(newVal);\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.fetchCSVData();\r\n  },\r\n  methods: {\r\n    change(hi) {\r\n      var color = d3\r\n        .scaleSequential()\r\n        .interpolator(d3.interpolateCubehelixDefault)\r\n        .domain([0, 9]);\r\n        \r\n      for (let index = 0; index < 10; index++) {\r\n        if (index == hi) d3.selectAll(\".id\" + index).style(\"fill\", color(index));\r\n        else d3.selectAll(\".id\" + index).style(\"fill\", \"lightgrey\");\r\n      }\r\n      if (hi == -1)\r\n        for (let index = 0; index < 10; index++) {\r\n          d3.selectAll(\".id\" + index).style(\"fill\", color(index));\r\n        }\r\n    },\r\n    fetchCSVData() {\r\n      fetch(this.$props.apiUrl)\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw Error(response.statusText);\r\n          }\r\n          return response.text();\r\n        })\r\n        .then((result) => {\r\n          return d3.csvParse(result);\r\n        })\r\n        .then((result) => {\r\n          this.drawChart(result);\r\n        });\r\n    },\r\n    drawChart(csvData) {\r\n      var size = CONSTANTS.SIZE;\r\n      var margin = size.MARGIN;\r\n      var width = size.WIDTH;\r\n      var height = size.HEIGHT;\r\n      var svg = d3\r\n        .select(this.$refs.refChartDiv)\r\n        .append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .append(\"g\")\r\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n      var x_list = csvData.map((x) => x[\"x\"]);\r\n      var x_min = Math.min(...x_list);\r\n      var x_max = Math.max(...x_list);\r\n      var y_list = csvData.map((x) => x[\"y\"]);\r\n      var y_min = Math.min(...y_list);\r\n      var y_max = Math.max(...y_list);\r\n      var x = d3.scaleLinear().domain([x_min, x_max]).range([0, width]);\r\n      svg\r\n        .append(\"g\")\r\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n        .call(d3.axisBottom(x));\r\n      var y = d3.scaleLinear().domain([y_min, y_max]).range([0, height]);\r\n      svg.append(\"g\").call(d3.axisLeft(y));\r\n      var color = d3\r\n        .scaleSequential()\r\n        .interpolator(d3.interpolateCubehelixDefault)\r\n        .domain([0, 9]);\r\n      var hi = this.$props.highlight;\r\n      svg\r\n        .append(\"g\")\r\n        .selectAll(\"dot\")\r\n        .data(csvData)\r\n        .enter()\r\n        .append(\"circle\")\r\n        .attr(\"cx\", function (d) {\r\n          return x(d.x);\r\n        })\r\n        .attr(\"cy\", function (d) {\r\n          return y(d.y);\r\n        })\r\n        .attr(\"r\", 5)\r\n        .attr(\"class\", function (d) {\r\n          return \"id\" + d.label;\r\n        })\r\n        .style(\"fill\", function (d) {\r\n          // console.log(this.$props.highlight);\r\n          if (-1 == hi || d.label == hi) {\r\n            return color(d.label);\r\n          }\r\n          return \"lightgrey\";\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n</style>\r\n"]}]}