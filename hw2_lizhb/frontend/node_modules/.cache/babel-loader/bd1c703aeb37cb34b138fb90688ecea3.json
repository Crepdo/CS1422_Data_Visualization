{"remainingRequest":"/home/lzb/Desktop/ARTS-hw2/frontend/node_modules/babel-loader/lib/index.js!/home/lzb/Desktop/ARTS-hw2/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/lzb/Desktop/ARTS-hw2/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lzb/Desktop/ARTS-hw2/frontend/src/components/BaseCharComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lzb/Desktop/ARTS-hw2/frontend/src/components/BaseCharComponent.vue","mtime":1649346098073},{"path":"/home/lzb/Desktop/ARTS-hw2/frontend/babel.config.js","mtime":1649343361802},{"path":"/home/lzb/Desktop/ARTS-hw2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1649343723699},{"path":"/home/lzb/Desktop/ARTS-hw2/frontend/node_modules/babel-loader/lib/index.js","mtime":1649343724219},{"path":"/home/lzb/Desktop/ARTS-hw2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1649343723699},{"path":"/home/lzb/Desktop/ARTS-hw2/frontend/node_modules/vue-loader/lib/index.js","mtime":1649343724399}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvaG9tZS9semIvRGVza3RvcC9BUlRTLWh3Mi9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICogYXMgZDMgZnJvbSAiZDMiOwppbXBvcnQgQ09OU1RBTlRTIGZyb20gIkAvY29uc3RhbnRzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJCYXNlQ2hhcnRDb21wb25lbnQiLAogIHByb3BzOiB7CiAgICB0aXRsZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgYXBpVXJsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBoaWdobGlnaHQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIC8vc3dpdGNoCiAgICBoaWdobGlnaHQ6IGZ1bmN0aW9uIGhpZ2hsaWdodChuZXdWYWwsIG9sZFZhbCkgewogICAgICBpZiAobmV3VmFsICE9PSBvbGRWYWwpIHsKICAgICAgICB0aGlzLiRwcm9wcy5oaWdobGlnaHQgPSBuZXdWYWw7CiAgICAgICAgY29uc29sZS5sb2coIm5ld1ZhbDoiLCB0aGlzLiRwcm9wcy5oaWdobGlnaHQpOwogICAgICAgIHRoaXMuY2hhbmdlKG5ld1ZhbCk7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoQ1NWRGF0YSgpOwogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlOiBmdW5jdGlvbiBjaGFuZ2UoaGkpIHsKICAgICAgdmFyIGNvbG9yID0gZDMuc2NhbGVTZXF1ZW50aWFsKCkuaW50ZXJwb2xhdG9yKGQzLmludGVycG9sYXRlQ3ViZWhlbGl4RGVmYXVsdCkuZG9tYWluKFswLCA5XSk7CgogICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgMTA7IGluZGV4KyspIHsKICAgICAgICBpZiAoaW5kZXggPT0gaGkpIGQzLnNlbGVjdEFsbCgiLmlkIiArIGluZGV4KS5zdHlsZSgiZmlsbCIsIGNvbG9yKGluZGV4KSk7ZWxzZSBkMy5zZWxlY3RBbGwoIi5pZCIgKyBpbmRleCkuc3R5bGUoImZpbGwiLCAibGlnaHRncmV5Iik7CiAgICAgIH0KCiAgICAgIGlmIChoaSA9PSAtMSkgZm9yICh2YXIgX2luZGV4ID0gMDsgX2luZGV4IDwgMTA7IF9pbmRleCsrKSB7CiAgICAgICAgZDMuc2VsZWN0QWxsKCIuaWQiICsgX2luZGV4KS5zdHlsZSgiZmlsbCIsIGNvbG9yKF9pbmRleCkpOwogICAgICB9CiAgICB9LAogICAgZmV0Y2hDU1ZEYXRhOiBmdW5jdGlvbiBmZXRjaENTVkRhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBmZXRjaCh0aGlzLiRwcm9wcy5hcGlVcmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgewogICAgICAgICAgdGhyb3cgRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICByZXR1cm4gZDMuY3N2UGFyc2UocmVzdWx0KTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgX3RoaXMuZHJhd0NoYXJ0KHJlc3VsdCk7CiAgICAgIH0pOwogICAgfSwKICAgIGRyYXdDaGFydDogZnVuY3Rpb24gZHJhd0NoYXJ0KGNzdkRhdGEpIHsKICAgICAgdmFyIHNpemUgPSBDT05TVEFOVFMuU0laRTsKICAgICAgdmFyIG1hcmdpbiA9IHNpemUuTUFSR0lOOwogICAgICB2YXIgd2lkdGggPSBzaXplLldJRFRIOwogICAgICB2YXIgaGVpZ2h0ID0gc2l6ZS5IRUlHSFQ7CiAgICAgIHZhciBzdmcgPSBkMy5zZWxlY3QodGhpcy4kcmVmcy5yZWZDaGFydERpdikuYXBwZW5kKCJzdmciKS5hdHRyKCJ3aWR0aCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpLmF0dHIoImhlaWdodCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKS5hcHBlbmQoImciKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyBtYXJnaW4ubGVmdCArICIsIiArIG1hcmdpbi50b3AgKyAiKSIpOwogICAgICB2YXIgeF9saXN0ID0gY3N2RGF0YS5tYXAoZnVuY3Rpb24gKHgpIHsKICAgICAgICByZXR1cm4geFsieCJdOwogICAgICB9KTsKICAgICAgdmFyIHhfbWluID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgX3RvQ29uc3VtYWJsZUFycmF5KHhfbGlzdCkpOwogICAgICB2YXIgeF9tYXggPSBNYXRoLm1heC5hcHBseShNYXRoLCBfdG9Db25zdW1hYmxlQXJyYXkoeF9saXN0KSk7CiAgICAgIHZhciB5X2xpc3QgPSBjc3ZEYXRhLm1hcChmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiB4WyJ5Il07CiAgICAgIH0pOwogICAgICB2YXIgeV9taW4gPSBNYXRoLm1pbi5hcHBseShNYXRoLCBfdG9Db25zdW1hYmxlQXJyYXkoeV9saXN0KSk7CiAgICAgIHZhciB5X21heCA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIF90b0NvbnN1bWFibGVBcnJheSh5X2xpc3QpKTsKICAgICAgdmFyIHggPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbeF9taW4sIHhfbWF4XSkucmFuZ2UoWzAsIHdpZHRoXSk7CiAgICAgIHN2Zy5hcHBlbmQoImciKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDAsIiArIGhlaWdodCArICIpIikuY2FsbChkMy5heGlzQm90dG9tKHgpKTsKICAgICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbeV9taW4sIHlfbWF4XSkucmFuZ2UoWzAsIGhlaWdodF0pOwogICAgICBzdmcuYXBwZW5kKCJnIikuY2FsbChkMy5heGlzTGVmdCh5KSk7CiAgICAgIHZhciBjb2xvciA9IGQzLnNjYWxlU2VxdWVudGlhbCgpLmludGVycG9sYXRvcihkMy5pbnRlcnBvbGF0ZUN1YmVoZWxpeERlZmF1bHQpLmRvbWFpbihbMCwgOV0pOwogICAgICB2YXIgaGkgPSB0aGlzLiRwcm9wcy5oaWdobGlnaHQ7CiAgICAgIHN2Zy5hcHBlbmQoImciKS5zZWxlY3RBbGwoImRvdCIpLmRhdGEoY3N2RGF0YSkuZW50ZXIoKS5hcHBlbmQoImNpcmNsZSIpLmF0dHIoImN4IiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4geChkLngpOwogICAgICB9KS5hdHRyKCJjeSIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIHkoZC55KTsKICAgICAgfSkuYXR0cigiciIsIDUpLmF0dHIoImNsYXNzIiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gImlkIiArIGQubGFiZWw7CiAgICAgIH0pLnN0eWxlKCJmaWxsIiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiRwcm9wcy5oaWdobGlnaHQpOwogICAgICAgIGlmICgtMSA9PSBoaSB8fCBkLmxhYmVsID09IGhpKSB7CiAgICAgICAgICByZXR1cm4gY29sb3IoZC5sYWJlbCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gImxpZ2h0Z3JleSI7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;AAQA;AACA;AACA;AACAA,4BADA;AAEAC;AACAC;AACAC,kBADA;AAEAC;AAFA,KADA;AAKAC;AACAF,kBADA;AAEAC;AAFA,KALA;AASAE;AACAH,kBADA;AAEAC;AAFA;AATA,GAFA;AAgBAG;AAAA;AACAD,aADA,qBACAE,MADA,EACAC,MADA,EACA;AACA;AACA;AACAC;AACA;AACA;AACA;AAPA,GAhBA;AAyBAC,SAzBA,qBAyBA;AACA;AACA,GA3BA;AA4BAC;AACAC,UADA,kBACAC,EADA,EACA;AACA,qBACAC,eADA,GAEAC,YAFA,CAEAC,8BAFA,EAGAC,MAHA,CAGA,MAHA;;AAKA;AACA,sFACAD;AACA;;AACA,oBACA;AACAA;AACA;AACA,KAfA;AAgBAE,gBAhBA,0BAgBA;AAAA;;AACAC,gCACAC,IADA,CACA;AACA;AACA;AACA;;AACA;AACA,OANA,EAOAA,IAPA,CAOA;AACA;AACA,OATA,EAUAA,IAVA,CAUA;AACA;AACA,OAZA;AAaA,KA9BA;AA+BAC,aA/BA,qBA+BAC,OA/BA,EA+BA;AACA;AACA;AACA;AACA;AACA,mBACAC,MADA,CACA,sBADA,EAEAC,MAFA,CAEA,KAFA,EAGAC,IAHA,CAGA,OAHA,EAGAC,kCAHA,EAIAD,IAJA,CAIA,QAJA,EAIAE,mCAJA,EAKAH,MALA,CAKA,GALA,EAMAC,IANA,CAMA,WANA,EAMA,mDANA;AAOA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACAG,UACAJ,MADA,CACA,GADA,EAEAC,IAFA,CAEA,WAFA,EAEA,6BAFA,EAGAI,IAHA,CAGAb,gBAHA;AAIA;AACAY;AACA,qBACAd,eADA,GAEAC,YAFA,CAEAC,8BAFA,EAGAC,MAHA,CAGA,MAHA;AAIA;AACAW,UACAJ,MADA,CACA,GADA,EAEAM,SAFA,CAEA,KAFA,EAGAC,IAHA,CAGAT,OAHA,EAIAU,KAJA,GAKAR,MALA,CAKA,QALA,EAMAC,IANA,CAMA,IANA,EAMA;AACA;AACA,OARA,EASAA,IATA,CASA,IATA,EASA;AACA;AACA,OAXA,EAYAA,IAZA,CAYA,GAZA,EAYA,CAZA,EAaAA,IAbA,CAaA,OAbA,EAaA;AACA;AACA,OAfA,EAgBAQ,KAhBA,CAgBA,MAhBA,EAgBA;AACA;AACA;AACA;AACA;;AACA;AACA,OAtBA;AAuBA;AApFA;AA5BA","names":["name","props","title","type","required","apiUrl","highlight","watch","newVal","oldVal","console","created","methods","change","hi","scaleSequential","interpolator","d3","domain","fetchCSVData","fetch","then","drawChart","csvData","select","append","attr","width","height","svg","call","selectAll","data","enter","style"],"sourceRoot":"src/components","sources":["BaseCharComponent.vue"],"sourcesContent":["<template>\r\n  <b-col sm=\"12\" md=\"4\" class=\"p-1\">\r\n    <div ref=\"refChartDiv\"></div>\r\n    <h3>{{ title }}</h3>\r\n  </b-col>\r\n</template>\r\n\r\n<script>\r\nimport * as d3 from \"d3\";\r\nimport CONSTANTS from \"@/constants\";\r\nexport default {\r\n  name: \"BaseChartComponent\",\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    apiUrl: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    highlight: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n  },\r\n  watch: { //switch\r\n    highlight(newVal, oldVal) {\r\n      if (newVal !== oldVal) {\r\n        this.$props.highlight = newVal;\r\n        console.log(\"newVal:\", this.$props.highlight);\r\n        this.change(newVal);\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.fetchCSVData();\r\n  },\r\n  methods: {\r\n    change(hi) {\r\n      var color = d3\r\n        .scaleSequential()\r\n        .interpolator(d3.interpolateCubehelixDefault)\r\n        .domain([0, 9]);\r\n        \r\n      for (let index = 0; index < 10; index++) {\r\n        if (index == hi) d3.selectAll(\".id\" + index).style(\"fill\", color(index));\r\n        else d3.selectAll(\".id\" + index).style(\"fill\", \"lightgrey\");\r\n      }\r\n      if (hi == -1)\r\n        for (let index = 0; index < 10; index++) {\r\n          d3.selectAll(\".id\" + index).style(\"fill\", color(index));\r\n        }\r\n    },\r\n    fetchCSVData() {\r\n      fetch(this.$props.apiUrl)\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw Error(response.statusText);\r\n          }\r\n          return response.text();\r\n        })\r\n        .then((result) => {\r\n          return d3.csvParse(result);\r\n        })\r\n        .then((result) => {\r\n          this.drawChart(result);\r\n        });\r\n    },\r\n    drawChart(csvData) {\r\n      var size = CONSTANTS.SIZE;\r\n      var margin = size.MARGIN;\r\n      var width = size.WIDTH;\r\n      var height = size.HEIGHT;\r\n      var svg = d3\r\n        .select(this.$refs.refChartDiv)\r\n        .append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .append(\"g\")\r\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n      var x_list = csvData.map((x) => x[\"x\"]);\r\n      var x_min = Math.min(...x_list);\r\n      var x_max = Math.max(...x_list);\r\n      var y_list = csvData.map((x) => x[\"y\"]);\r\n      var y_min = Math.min(...y_list);\r\n      var y_max = Math.max(...y_list);\r\n      var x = d3.scaleLinear().domain([x_min, x_max]).range([0, width]);\r\n      svg\r\n        .append(\"g\")\r\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n        .call(d3.axisBottom(x));\r\n      var y = d3.scaleLinear().domain([y_min, y_max]).range([0, height]);\r\n      svg.append(\"g\").call(d3.axisLeft(y));\r\n      var color = d3\r\n        .scaleSequential()\r\n        .interpolator(d3.interpolateCubehelixDefault)\r\n        .domain([0, 9]);\r\n      var hi = this.$props.highlight;\r\n      svg\r\n        .append(\"g\")\r\n        .selectAll(\"dot\")\r\n        .data(csvData)\r\n        .enter()\r\n        .append(\"circle\")\r\n        .attr(\"cx\", function (d) {\r\n          return x(d.x);\r\n        })\r\n        .attr(\"cy\", function (d) {\r\n          return y(d.y);\r\n        })\r\n        .attr(\"r\", 5)\r\n        .attr(\"class\", function (d) {\r\n          return \"id\" + d.label;\r\n        })\r\n        .style(\"fill\", function (d) {\r\n          // console.log(this.$props.highlight);\r\n          if (-1 == hi || d.label == hi) {\r\n            return color(d.label);\r\n          }\r\n          return \"lightgrey\";\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n</style>\r\n"]}]}